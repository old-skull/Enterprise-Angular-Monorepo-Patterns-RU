# Обеспечение консистентности в форматировании кода

В Google действует общий принцип: все, что можно автоматизировать, должно быть автоматизировано. Одной из таких вещей является форматирование кода. Именно поэтому Nx поставляется со встроенной поддержкой Prettier.

Вам не нужно абсолютно ничего настраивать. Просто вызовите <mark style="color:red;">`format:write`</mark>, чтобы отформатировать соответствующие файлы, и <mark style="color:red;">`format:check`</mark> в CI, чтобы гарантировать, что все отформатировано в одном стиле.

Выполните <mark style="color:red;">`npm run format:write - --help`</mark>, чтобы увидеть доступные опции.

<mark style="color:red;">`npm run format:write - --base=[SHA1] --base=[SHA2]`</mark>. Nx вычисляет, что изменилось между двумя SHA, и форматирует измененные файлы. Например, <mark style="color:red;">`npm run format:write - --base=origin/master --base=HEAD`</mark> форматирует изменения из PR.

Команда <mark style="color:red;">`format:check`</mark> принимает те же опции, но вместо форматирования файлов она выбрасывает ошибку, если какой-либо из файлов отформатирован неправильно. Это полезно для CI/CD.

Форматирование с помощью автоматизации имеет очень важное преимущество: диффы (diffs) содержат только фактические изменения кода. Изменения, содержащий разницу в  пробелах, затрудняют отслеживание фактических изменений кода от изменений форматирования. Это еще хуже, если у разработчиков разные локальные настройки и они продолжают фиксировать одни и те же изменения туда-сюда.
